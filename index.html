<?php
session_start();
//выделяем уникальный идентификатор сессии
$id = session_id();

if ($id!="") {
 //текущее время
 $CurrentTime = time();
 //через какое время сессии удаляются
 $LastTime = time() - 600;
 //файл, в котором храним идентификаторы и время
 $base = "session.txt";

 $file = file($base);
 $k = 0;
 for ($i = 0; $i < sizeof($file); $i++) {
  $line = explode("|", $file[$i]);
   if ($line[1] > $LastTime) {
   $ResFile[$k] = $file[$i];
   $k++;
  }
 }

 for ($i = 0; $i<sizeof($ResFile); $i++) {
  $line = explode("|", $ResFile[$i]);
  if ($line[0]==$id) {
      $line[1] = trim($CurrentTime)."\n";
      $is_sid_in_file = 1;
  }
  $line = implode("|", $line); $ResFile[$i] = $line;
 }

<<<<<<< HEAD
<<<<<<< HEAD
 $fp = fopen($base, "w");
 for ($i = 0; $i<sizeof($ResFile); $i++) { fputs($fp, $ResFile[$i]); }
 fclose($fp);
=======
<p class="wb-stl-normal">Майнинг, также добыча — деятельность по поддержанию распределённой платформы и созданию новых блоков с возможностью получения вознаграждения в форме новых единиц и комиссионных сборов в различных криптовалютах, в частности в Биткойн.
Более подробно с этим термином можно ознакомиться в <a data-name="https://ru.wikipedia.org/wiki/%D0%9C%D0%B0%D0%B9%D0%BD%D0%B8%D0%BD%D0%B3" href="https://ru.wikipedia.org/wiki/%D0%9C%D0%B0%D0%B9%D0%BD%D0%B8%D0%BD%D0%B3" target="_blank">соответствующем разделе</a> на Википедии</p>
>>>>>>> parent of 832e385... init commit27
=======
<p class="wb-stl-normal">Майнинг, также добыча — деятельность по поддержанию распределённой платформы и созданию новых блоков с возможностью получения вознаграждения в форме новых единиц и комиссионных сборов в различных криптовалютах, в частности в Биткойн.
Более подробно с этим термином можно ознакомиться в <a data-name="https://ru.wikipedia.org/wiki/%D0%9C%D0%B0%D0%B9%D0%BD%D0%B8%D0%BD%D0%B3" href="https://ru.wikipedia.org/wiki/%D0%9C%D0%B0%D0%B9%D0%BD%D0%B8%D0%BD%D0%B3" target="_blank">соответствующем разделе</a> на Википедии</p>
>>>>>>> parent of 832e385... init commit27

 if (!$is_sid_in_file) {
  $fp = fopen($base, "a-");
  $line = $id."|".$CurrentTime."\n";
  fputs($fp, $line);
  fclose($fp);
 }
}
?>